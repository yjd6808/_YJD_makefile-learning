A := 1000

export A

SUBDIRS := foo bar baz


all clean: $(SUBDIRS)

$(SUBDIRS) : FORCE
	@# 하위 디렉토리의 Makefile을 실행하기 위해서는 $(MAKE) 변수를 사용하는게 권장된다.
	@# 이걸 쓰면 make에 +접두사가 효과가 적용되어서 make -n 옵션(명령을 실행하지 않고 출력만 하는 옵션)을 주고
	@# 실행하더라도 스크립트 내에서 사용하는 make 명령을 수행하도록 만들어준다.
	@# 즉, 아래 코드가 make -n 모드로 실행하면 원래 실행되면 안되는데 $(MAKE) 변수를 사용했기땜에 스크립트가 실행됨
	$(MAKE) -C $@ $(MAKECMDGOALS)

	@# 레시피에서 @접두사는 해당 명령줄이 출력되는 것을 막아준다.
	@# 지금 이글을 적는 것도 주석이 출력되지 않도록 하기 위해 @를 붙여준거임
	@# + 접두사는 make -n으로 실행하더라도 정상적으로 해당 접두사가 붙은 명령줄을 실행되도록 만들어준다.
	@# 밑에 예시로 +echo aaaa를 해놨기 땜에 make -n으로 실행하더라도 aaaa가 출력됨
	+echo aaaa
		
	@# - 접두사는 해당 명령이 실패(0이 아닌 오류코드)하더라도 make 스크립트 실행이 중단되지 않는다.
	-exit 1
	exit 2



FORCE: ;
